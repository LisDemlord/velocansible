# Velocansible

Velocansible — это проект, предназначенный для автоматизации развертывания и настройки Velociraptor на серверах и клиентских машинах с использованием Ansible.

## Структура проекта

```
velocansible/                             # Основная директория проекта Velocansible
├── ansible.cfg                           # Конфигурационный файл Ansible, содержащий настройки для выполнения плейбуков
├── inventory/                            # Директория с файлами инвентаризации
│   └── hosts.yml                         # Файл инвентаризации, содержащий информацию о хостах для управления
├── playbooks/                            # Директория с плейбуками Ansible
│   ├── install-clients.yml               # Плейбук для установки Velociraptor на клиентских машинах
│   ├── install-host.yml                  # Плейбук для установки Velociraptor на хостах
│   ├── rollback-clients.yml              # Плейбук для отката изменений на клиентских машинах
│   └── rollback-host.yml                 # Плейбук для отката изменений на хостах
├── README.md                             # Документация проекта, содержащая информацию о его использовании и настройке
├── roles/                                # Директория с ролями Ansible
│   ├── configuring_iptables/             # Роль для настройки iptables (брандмауэра)
│   │   └── tasks/                        # Директория с задачами роли
│   │       └── main.yml                  # Основной файл задач для настройки iptables
│   ├── install_velociraptor_clients/     # Роль для установки Velociraptor на клиентских машинах
│   │   └── tasks/                        # Директория с задачами роли
│   │       └── main.yml                  # Основной файл задач для установки Velociraptor на клиентских машинах
│   ├── install_velociraptor_host/        # Роль для установки Velociraptor на хостах
│   │   └── tasks/                        # Директория с задачами роли
│   │       └── main.yml                  # Основной файл задач для установки Velociraptor на хостах
│   ├── rollback_iptables/                # Роль для отката настроек iptables
│   │   └── tasks/                        # Директория с задачами роли
│   │       └── main.yml                  # Основной файл задач для отката настроек iptables
│   ├── rollback_velociraptor_clients/    # Роль для отката изменений на клиентских машинах
│   │   └── tasks/                        # Директория с задачами роли
│   │       └── main.yml                  # Основной файл задач для отката изменений на клиентских машинах
│   └── rollback_velociraptor_host/       # Роль для отката изменений на хостах
│       └── tasks/                        # Директория с задачами роли
│           └── main.yml                  # Основной файл задач для отката изменений на хостах
├── runner.py                             # Скрипт для запуска Ansible-процессов
└── vault.yml                             # Файл с зашифрованными переменными, используемыми в плейбуках
```

## Установка

1. Убедитесь, что у вас установлен Ansible. Вы можете установить его с помощью pip:

   ```bash
   pip install ansible
   ```

2. Настройте SSH-доступ к вашим серверам и клиентским машинам.

3. Создайте и настройте файл `vault.yml` для хранения зашифрованных переменных.

## Использование

### Развертывание

Запустите скрипт и следуйте указаниям:

```bash
./runner.py
```

## Структура ролей

- **configuring_iptables**: Роль для настройки iptables на серверах.
- **install_velociraptor_host**: Роль для установки Velociraptor на серверной части.
- **install_velociraptor_clients**: Роль для установки Velociraptor на клиентских машинах.
- **rollback_iptables**: Роль для отката настроек iptables.
- **rollback_velociraptor_clients**: Роль для отката изменений на клиентских машинах.
- **rollback_velociraptor_host**: Роль для отката изменений на хостах.
